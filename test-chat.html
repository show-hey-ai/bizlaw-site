<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Gemini APIテスト</title>
</head>
<body>
    <h1>Gemini APIテスト</h1>
    <button onclick="testAPI()">APIテスト実行</button>
    <pre id="result"></pre>

    <script>
        async function testAPI() {
            const resultDiv = document.getElementById('result');
            resultDiv.textContent = 'テスト中...';

            try {
                // 複数のAPIキーをテスト
                const apiKeys = [
                    'AIzaSyDAukBCgTEy8uGfcyJflo_ADEId9GLqGb0',
                    'AIzaSyBf3FYa6VQ9d3jVu30RoaWz2H2PlCCPTNk'
                ];

                for (const key of apiKeys) {
                    resultDiv.textContent += `\n\nAPIキー ${key.substring(0, 10)}... をテスト中:\n`;
                    
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${key}`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            contents: [{
                                parts: [{
                                    text: "こんにちは。テストメッセージです。"
                                }]
                            }]
                        })
                    });

                    if (response.ok) {
                        const data = await response.json();
                        resultDiv.textContent += `成功！\nレスポンス: ${JSON.stringify(data, null, 2)}`;
                        break;
                    } else {
                        const error = await response.json();
                        resultDiv.textContent += `エラー ${response.status}: ${JSON.stringify(error, null, 2)}`;
                    }
                }
            } catch (error) {
                resultDiv.textContent += `\n\nエラー発生: ${error.message}`;
            }
        }
    </script>
</body>
</html>